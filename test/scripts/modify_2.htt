SET DATA=A123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567B

CLIENT

# 1) body data until the pointer of the "changeme" value are 16369 bytes
# 2) handler (mod_proxy) reads up to 16384 bytes each time invoking the input filter
# => forwarding input filter must provided the 16 bytes of the changed variable at
#    the next call because we have only 15 bytes remaining in the buffer
_REQ localhost 16100
__POST /htt/modify?param4=value4 HTTP/1.1
__Host: localhost
__Content-Type: apPlication/x-www-form-urlencoded
__Content-Length: AUTO
__
__param1=value1&huge=${DATA}${DATA}${DATA}${DATA}${DATA}01&param2=changeme&param3=value3
_EXPECT . "==OK=="
_WAIT

# 1) body data until the pointer of the "changeme" value are 16368 bytes
# 2) handler (mod_proxy) reads up to 16384 bytes each time invoking the input filter
# => forwarding input filter can send the 16 bytes of the changed variable
_REQ localhost 16100
__POST /htt/modify?param4=value4 HTTP/1.1
__Host: localhost
__Content-Type: apPlication/x-www-form-urlencoded
__Content-Length: AUTO
__
__param1=value1&huge=${DATA}${DATA}${DATA}${DATA}${DATA}2&param2=changeme&param3=value3
_EXPECT . "==OK=="
_WAIT

END

SERVER 16101

_RES
_EXPECT . "/htt/modify.param4=value4"
_EXPECT . "!changeme"
_EXPECT . "param1=value1&huge=${DATA}${DATA}${DATA}${DATA}${DATA}01&param2=this_has_changed&param3=value3"
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: text/plain
__
__==OK==

_RES
_EXPECT . "/htt/modify.param4=value4"
_EXPECT . "!changeme"
_EXPECT . "param1=value1&huge=${DATA}${DATA}${DATA}${DATA}${DATA}2&param2=this_has_changed&param3=value3"
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: text/plain
__
__==OK==

END
